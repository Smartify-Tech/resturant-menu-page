const menu = [

    {
        id: 1,
        title: 'cheese cake',
        category: 'pie',
        price: 15.56,
        img: './images/item-1.png',
        description: `Lorem, ipsum dolor sit amet 
                      consectetur adipisicing elit. Ratione
                      repudiandae, placeat officiis sint
                      temporibus quae neque optio dolorem`,
    },
    {
        id: 2,
        title: 'pancrease cake',
        category: 'lunch',
        price: 8.00,
        img: './images/item-2.png',
        description: `Lorem, ipsum dolor sit amet 
                      consectetur adipisicing elit. Ratione
                      repudiandae, placeat officiis sint
                      temporibus quae neque optio dolorem`,
    },
    {
        id: 3,
        title: 'Blueberry cheese',
        category: 'dinner',
        price: 7.99,
        img: './images/item-3.png',
        description: `Lorem, ipsum dolor sit amet 
                      consectetur adipisicing elit. Ratione
                      repudiandae, placeat officiis sint
                      temporibus quae neque optio dolorem`,
    },
    {
        id: 4,
        title: 'Indian cake',
        category: 'breakfast',
        price: 15.56,
        img: './images/item-1.png',
        description: `Lorem, ipsum dolor sit amet 
                      consectetur adipisicing elit. Ratione
                      repudiandae, placeat officiis sint
                      temporibus quae neque optio dolorem`,
    },
    {
        id: 1,
        title: 'cheese cake',
        category: 'lunch',
        price: 15.56,
        img: './images/item-1.png',
        description: `Lorem, ipsum dolor sit amet 
                      consectetur adipisicing elit. Ratione
                      repudiandae, placeat officiis sint
                      temporibus quae neque optio dolorem`,
    },
    {
        id: 1,
        title: 'Morning cake',
        category: 'dinner',
        price: 15.56,
        img: './images/item-1.png',
        description: `Lorem, ipsum dolor sit amet 
                      consectetur adipisicing elit. Ratione
                      repudiandae, placeat officiis sint
                      temporibus quae neque optio dolorem`,
    },
    {
        id: 1,
        title: 'cream pie',
        category: 'breakfast',
        price: 15.56,
        img: './images/item-1.png',
        description: `Lorem, ipsum dolor sit amet 
                      consectetur adipisicing elit. Ratione
                      repudiandae, placeat officiis sint
                      temporibus quae neque optio dolorem`,
    },
    {
        id: 1,
        title: 'fried burger',
        category: 'lauch',
        price: 15.56,
        img: './images/item-1.png',
        description: `Lorem, ipsum dolor sit amet 
                      consectetur adipisicing elit. Ratione
                      repudiandae, placeat officiis sint
                      temporibus quae neque optio dolorem`,
    },
    {
        id: 1,
        title: 'hand burger',
        category: 'dinner',
        price: 15.56,
        img: './images/item-1.png',
        description: `Lorem, ipsum dolor sit amet 
                      consectetur adipisicing elit. Ratione
                      repudiandae, placeat officiis sint
                      temporibus quae neque optio dolorem`,
    },
    {
        id: 1,
        title: 'cheese cake',
        category: 'breakfast',
        price: 15.56,
        img: './images/item-1.png',
        description: `Lorem, ipsum dolor sit amet 
                      consectetur adipisicing elit. Ratione
                      repudiandae, placeat officiis sint
                      temporibus quae neque optio dolorem`,
    },
    {
        id: 1,
        title: 'mcDonald\'s',
        category: 'dinner',
        price: 15.56,
        img: './images/item-1.png',
        description: `Lorem, ipsum dolor sit amet 
                      consectetur adipisicing elit. Ratione
                      repudiandae, placeat officiis sint
                      temporibus quae neque optio dolorem`,
    },
    {
        id: 1,
        title: 'cheeseburger',
        category: 'breakfast',
        price: 15.56,
        img: './images/item-1.png',
        description: `Lorem, ipsum dolor sit amet 
                      consectetur adipisicing elit. Ratione
                      repudiandae, placeat officiis sint
                      temporibus quae neque optio dolorem`,
    },
    {
        id: 1,
        title: 'cheesecake',
        category: 'pie',
        price: 15.56,
        img: './images/item-1.png',
        description: `Lorem, ipsum dolor sit amet 
                      consectetur adipisicing elit. Ratione
                      repudiandae, placeat officiis sint
                      temporibus quae neque optio dolorem`,
    },
    {
        id: 1,
        title: 'shackburger',
        category: 'dinner',
        price: 15.56,
        img: './images/item-1.png',
        description: `Lorem, ipsum dolor sit amet 
                      consectetur adipisicing elit. Ratione
                      repudiandae, placeat officiis sint
                      temporibus quae neque optio dolorem`,
    },
    {
        id: 1,
        title: 'cheese cake',
        category: 'lunch',
        price: 15.56,
        img: './images/item-1.png',
        description: `Lorem, ipsum dolor sit amet 
                      consectetur adipisicing elit. Ratione
                      repudiandae, placeat officiis sint
                      temporibus quae neque optio dolorem`,
    },
    {
        id: 1,
        title: 'cheese cake',
        category: 'dinner',
        price: 15.56,
        img: './images/item-1.png',
        description: `Lorem, ipsum dolor sit amet 
                      consectetur adipisicing elit. Ratione
                      repudiandae, placeat officiis sint
                      temporibus quae neque optio dolorem`,
    },
    {
        id: 1,
        title: 'cheese cake',
        category: 'pie',
        price: 15.56,
        img: './images/item-1.png',
        description: `Lorem, ipsum dolor sit amet 
                      consectetur adipisicing elit. Ratione
                      repudiandae, placeat officiis sint
                      temporibus quae neque optio dolorem`,
    },
    {
        id: 1,
        title: 'cheese cake',
        category: 'breakfast',
        price: 15.56,
        img: './images/item-1.png',
        description: `Lorem, ipsum dolor sit amet 
                      consectetur adipisicing elit. Ratione
                      repudiandae, placeat officiis sint
                      temporibus quae neque optio dolorem`,
    },
    {
        id: 1,
        title: 'cheese cake',
        category: 'dinner',
        price: 15.56,
        img: './images/item-1.png',
        description: `Lorem, ipsum dolor sit amet 
                      consectetur adipisicing elit. Ratione
                      repudiandae, placeat officiis sint
                      temporibus quae neque optio dolorem`,
    },
    {
        id: 1,
        title: 'cheese cake',
        category: 'breakfast',
        price: 15.56,
        img: './images/item-1.png',
        description: `Lorem, ipsum dolor sit amet 
                      consectetur adipisicing elit. Ratione
                      repudiandae, placeat officiis sint
                      temporibus quae neque optio dolorem`,
    },

    {
        id: 1,
        title: 'cheese cake',
        category: 'pie',
        price: 15.56,
        img: './images/item-1.png',
        description: `Lorem, ipsum dolor sit amet 
                      consectetur adipisicing elit. Ratione
                      repudiandae, placeat officiis sint
                      temporibus quae neque optio dolorem`,
    }

]


//select the menu-items container
const MenuContainer = document.querySelector('.menu-items');
//select the btn-container
const btnContainer = document.querySelector('.btn-container');


//load all menu items and buttons when page loads
window.addEventListener('DOMContentLoaded', function ()
{
    updateMenu(menu);
    btnContainer.innerHTML = mappOutCategories(menu);
    MenuContainer.innerHTML = mappOutMenuItems(menu);
    displayMenuButtons();
    

}) //end of DOMContentLoaded

// #region For Menu items

//update the menu array
function updateMenu(menu)
{
    for (let i = 1; i <= menu.length; i++)
    {
        let currentTarget = menu[i - 1];
        currentTarget.id = i;
        currentTarget.img = `./images/img-${currentTarget.id}.png`;
        
        //update the price with random number
        currentTarget.price = Math.floor(Math.random() * 30);
    }
}


//function iterates through all the menu item in
//the menu array, then modify it and returns an html elements 
//for that item
//and finally returns an array
function mappOutMenuItems(menu)
{
    let mappedMenu = menu.map(function (item)
    {
        return `<article class="menu-item">
                <img src= "${item.img}" class="item-photo" alt="">
                <div class="item-info">
                    <header>
                        <h4 class="item-name">${item.title}</h4>
                        <h4 class="item-price">$${item.price}</h4>
                    </header>
                    <p class="item-description">
                        ${item.description}
                    </p>
                </div>
            </article>`
    })

    return mappedMenu.join("")
}

//#endregion

//#region ForMenu Buttons

//map out unique categories using this reducer function
function reducer(defaultCategory, currentItem)
{
    if(!defaultCategory.includes(currentItem.category))
        defaultCategory.push(currentItem.category)
    
    return defaultCategory;
}

//iterate thru the category array
//and return a html element for the buttons
function mappOutCategories(menu)
{
    let UniqueCategories = menu.reduce(reducer, ['all'])
    let mappedUniqueCategories = UniqueCategories.map((category) =>
    {
        return `<button class="filter-btn" type="button"
                    data-category=${category}>${category}</button>`;
    })

    return mappedUniqueCategories.join("");
}


function displayMenuButtons()
{
    //select buttons
    //iterates thru the filter buttons
    document.querySelectorAll('.filter-btn').forEach((btn) =>
    {
        //add event listener to each filter button
        btn.addEventListener('click', (e) =>
        {
            //get the current category clicked
            const category = e.currentTarget.dataset.category;

            //loop thru the menu array and filter out the 
            //menu items depending on the
            //category clicked
            const menuCategory = menu.filter((menuItem) =>
            {

                if (menuItem.category === category)
                    return menuItem

            }) // end of filter

            if (category === 'all')
                MenuContainer.innerHTML = mappOutMenuItems(menu)
            else
                MenuContainer.innerHTML = mappOutMenuItems(menuCategory)

        }) // end of addEventListener

    })//end of foreach

}


//#endregion


